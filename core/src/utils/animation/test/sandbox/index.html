<!DOCTYPE html>
<html dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>Animation - Basic</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="../../../../../css/ionic.bundle.css" rel="stylesheet">
  <link href="../../../../../scripts/testing/styles.css" rel="stylesheet">
  <script src="../../../../../scripts/testing/scripts.js"></script>
  <script nomodule src="../../../../../dist/ionic/ionic.js"></script>
  <script type="module" src="../../../../../dist/ionic/ionic.esm.js"></script>
  <script type="module">
    import { createAnimation } from '../../../../dist/collection/utils/animation/animation.js';
    
    const cover = document.querySelectorAll('.cover');
    const square = document.querySelectorAll('.square'); 
       
    const rootAnimation = createAnimation();
    const coverAnimation = createAnimation();
    const squareAnimation = createAnimation();

    rootAnimation
      .duration(500)
      .easing('ease-in-out');
    
    coverAnimation
      .addElement(cover)
      .beforeStyles({ opacity: '1' })
      .afterStyles({ opacity: '' });
    
    squareAnimation
      .addElement(square)
      .beforeClearStyles(['opacity'])
      .fromTo('opacity', 0.70, 0.03);
      
    rootAnimation.addAnimation(coverAnimation);
    coverAnimation.addAnimation([squareAnimation]);

    let counter = 0;
    let init = false;
    document.querySelector('ion-button').addEventListener('click', () => {      
      if (counter === 100) {
        counter -= 5;
      } else {
        counter += 5;
      }
      
      if (!init) {
        rootAnimation.progressStart();
        init = true;
      }
      
      rootAnimation.progressStep(counter / 100);
    })
  </script>
  
  <style>
    .cover {
      opacity: 0;
    }
    .square {
      width: 100px;
      height: 100px;
      background: rgba(0, 0, 255, 0.5);
      text-align: center;
      line-height: 100px;
      margin-left: 25px;
      margin-top: 25px;
      margin-bottom: 25px;
      opacity: 0;
    }
  </style>
  </head>

<body
  <ion-app>
    <ion-header>
      <ion-toolbar>
        <ion-title>Animations</ion-title>
      </ion-toolbar>
    </ion-header>
    
    <ion-content>
      <div class="ion-padding">
        <ion-button>play step</ion-button>
        <div class="cover">
          <div class="square">Hello</div>
        </div>
      </div>
    </ion-content>
  </ion-app>
</body>

</html>

